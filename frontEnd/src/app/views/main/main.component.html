<!-- da inserire tutto il template per la tabella principale -->
<div class="ui-widget-header" style="padding:4px 10px;border-bottom: 0 none; text-align:left">
  <div>
    <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
    <input #globalFilter type="text" pInputText size="50" placeholder="Ricerca itinerario">
  </div>
</div>
<div class="tableContainer">
  <p-dataTable [value]="routes" scrollable="true" [globalFilter]="globalFilter" [emptyMessage]="'Nessun itinerario corrispondente ai filtri indicati'" scrollHeight="100%" expandableRows="true" #dataTableIstance>
    <p-header>ITINERARI</p-header>
    <p-column expander="true" [style]="{'width':'30px'}" styleClass="col-icon"></p-column>
    <p-column field="id" [style]="{'width':'70px'}" header="ID" [sortable]="true"></p-column>

    <p-column field="data" [style]="{'width':'120px'}" header="DATA" filterField="periodo" [sortable]="true" filterMatchMode="in">
      <ng-template pTemplate="filter" let-col>
        <p-multiSelect [options]="filtersValue.periods" defaultLabel="Tutti" selectedItemsLabel="{0} Periodi" maxSelectedLabels="1" (onChange)="dataTableIstance.filter($event.value,'periodo',col.filterMatchMode)" styleClass="ui-column-filter"></p-multiSelect>
      </ng-template>
      <ng-template let-itinerario="rowData" pTemplate="body">
        <span>{{itinerario.data | date:'dd-MM-y'}}</span>
      </ng-template>
    </p-column>

    <p-column field="durata" [style]="{'width':'110px'}" header="DURATA {{filtroDurata == null ? '' : (filtroDurata | time)}}" [sortable]="true" filterMatchMode="atMost">
      <ng-template pTemplate="filter" let-col>
        <i class="fa fa-close" (click)="filtroDurata=null;dataTableIstance.filter(null,col.field,col.filterMatchMode)"></i>
        <p-slider [(ngModel)]="filtroDurata" [min]="filtersValue.minDuration" [max]="filtersValue.maxDuration" (onSlideEnd)="dataTableIstance.filter($event.value,col.field,col.filterMatchMode)"></p-slider>
      </ng-template>
      <ng-template let-itinerario="rowData" pTemplate="body">
        <span>{{itinerario.durata | time}}</span>
      </ng-template>
    </p-column>

    <p-column field="lunghezza" [style]="{'width':'130px'}" header="LUNGHEZZA {{filtroLunghezza == null ? '' : filtroLunghezza+'km'}}" [sortable]="true" filterMatchMode="atMost">
      <ng-template pTemplate="filter" let-col>
        <i class="fa fa-close" (click)="filtroLunghezza=null;dataTableIstance.filter(null,col.field,col.filterMatchMode)"></i>
        <p-slider [(ngModel)]="filtroLunghezza" [min]="filtersValue.minRouteLength" [max]="filtersValue.maxRouteLength" (onSlideEnd)="dataTableIstance.filter($event.value,col.field,col.filterMatchMode)"></p-slider>
      </ng-template>
      <ng-template let-itinerario="rowData" pTemplate="body">
        <span>{{itinerario.lunghezza}} <span>km</span></span>
      </ng-template>
    </p-column>

    <p-column field="dislivello" [style]="{'width':'130px'}" header=" DISLIVELLO {{filtroDislivello == null ? '' : filtroDislivello+'m'}}" [sortable]="true" [filter]="true" filterMatchMode="atMost">
      <ng-template pTemplate="filter" let-col>
        <i class="fa fa-close" (click)="filtroDislivello=null;dataTableIstance.filter(null,col.field,col.filterMatchMode)"></i>
        <p-slider [(ngModel)]="filtroDislivello" [min]="0" [max]="500" (onSlideEnd)="dataTableIstance.filter($event.value,col.field,col.filterMatchMode)"></p-slider>
      </ng-template>
      <ng-template let-itinerario="rowData" pTemplate="body">
        <span>{{itinerario.dislivello}} <span>m</span></span>
      </ng-template>
    </p-column>

    <p-column field="difficolta" [style]="{'width':'130px'}" header="DIFFICOLTA" [sortable]="true" [filter]="true" filterMatchMode="in">
      <ng-template pTemplate="filter" let-col>
        <p-multiSelect [options]="filtersValue.difficulties" defaultLabel="Tutte" selectedItemsLabel="{0} DifficoltÃ " maxSelectedLabels="1" (onChange)="dataTableIstance.filter($event.value,col.field,col.filterMatchMode)" styleClass="ui-column-filter"></p-multiSelect>
      </ng-template>
    </p-column>

    <p-column field="luogo" [style]="{'width':'150px'}" header="LUOGO" [sortable]="true" filterMatchMode="in">
      <ng-template pTemplate="filter" let-col>
        <p-multiSelect [options]="filtersValue.places" defaultLabel="Tutti" selectedItemsLabel="{0} Luoghi" maxSelectedLabels="0" (onChange)="dataTableIstance.filter($event.value,col.field,col.filterMatchMode)" styleClass="ui-column-filter"></p-multiSelect>
      </ng-template>
    </p-column>

    <p-column field="descrizione" [style]="{'min-width':'500px'}" header="DESCRIZIONE"></p-column>

    <ng-template let-routeSelezionato pTemplate="rowexpansion">
      <route-detail [routeSelezionato]="routeSelezionato"> </route-detail>
    </ng-template>
  </p-dataTable>
</div>
